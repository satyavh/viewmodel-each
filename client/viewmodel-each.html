<body>
  <div class="row">
    <div class="col-md-8 col-md-offset-2">
      <h1>Viewmodel each issue</h1>
      <p>The issue here is that templates are each templates are rerendered when parent data changes.</p>
      <p>1. First add some persons</p>
      <p>2. Now press the 'Add Crowd button'</p>
      <p>You'll see that all template data is being reset</p>

      <table class="table">

        <thead>
          <tr>
            <th>
              <h2>Viewmodel body (correct)</h2>
            </th>
            <th>
              <h2>Viewmodel people (incorrect)</h2>
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              {{#each crowd }}
                <h3>Array data</h3>
                {{#each this.people }}
                  <p>{{name}}</p>
                {{/each}}
              {{/each}}

            </td>
            <td>
              {{#each crowd }}
                {{>peopleX}}
              {{/each}}
            </td>
          </tr>
        </tbody>

      </table>

      <button class="btn btn-danger" {{b "click: addNewCrowd"}}>Add new Crowd</button>
    </div>
  </div>
</body>


<template name="peopleX">
  <h3>Template People</h3>
  {{#each people }}
    <p>{{this.name}}</p>
  {{/each}}

  <p>Notice how this button works incorrectly as well?</p>
  <button class="btn btn-success" {{b "click: pushName"}}>Add person</button>
</template>
